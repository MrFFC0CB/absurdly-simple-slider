"use strict";class AsSlider{isInited;currentSlideId;sliderWrapper;sliderContainer;arrowLeft;arrowRight;autoplayInterval;isTouchDevice;sliderOptions;constructor(t,e){this.isInited=!1,this.currentSlideId=0,this.sliderWrapper=document.querySelector(t),this.sliderContainer=document.createElement("div"),this.arrowLeft=document.createElement("div"),this.arrowRight=document.createElement("div"),this.autoplayInterval=null,this.isTouchDevice="ontouchstart"in window||navigator.maxTouchPoints>0,this.sliderOptions={autoplay:e?.autoplay??!1,autoplayDelay:e?.autoplayDelay||5e3,stopAtAction:1==e?.stopAtAction,stoppedByAction:!1,pauseOnHover:0!=e?.pauseOnHover,transition:e?.transition??"fade",arrowsNav:e?.arrowsNav??!0,bulletsNav:e?.bulletsNav??!1,keyboardNav:e?.keyboardNav??!0,captions:e?.captions??!1,autoHeight:e?.autoHeight??!0}}childrenLength(){return this.sliderWrapper?this.sliderContainer.childElementCount>0?this.sliderContainer.childElementCount:this.sliderWrapper.childElementCount:0}updateHeight(){const t=this.sliderContainer?.children[this.currentSlideId];if(!t)return;let e=t.clientHeight;e+=parseInt(window.getComputedStyle(t).borderTopWidth),e+=parseInt(window.getComputedStyle(t).borderBottomWidth),e+=parseInt(window.getComputedStyle(t).marginTop),e+=parseInt(window.getComputedStyle(t).marginBottom),this.sliderContainer.style.height=`${e}px`,this.sliderOptions.arrowsNav&&this.sliderWrapper?.querySelectorAll(".arrow").forEach((t=>{t.style.height=`${e}px`}))}updateActiveBullet(t){this.sliderWrapper?.querySelector(".bullet")&&(this.sliderWrapper.querySelectorAll(".bullet").forEach((t=>{t.classList.remove("active")})),this.sliderWrapper.querySelector(`.bullet[data-slide-id="${t}"]`)?.classList.add("active"))}updateCaption(){if(!this.sliderOptions.captions)return;const t=this.sliderWrapper?.querySelector(".wrapper-captions"),e=this.sliderContainer.children[this.currentSlideId],i=t.querySelector("p");if(!e||!t)return;const s=e.dataset.caption||e.alt;s?i?(i.innerHTML=s,t.style.display="block"):t.style.display="none":(t.style.display="none",i&&(i.innerHTML=""))}stopAtActionMethod(){this.stopAutoplay(),this.sliderOptions.stoppedByAction=!0}movePrev(){if(0===this.currentSlideId)this.sliderContainer.children[this.currentSlideId].classList.remove("active"),this.sliderContainer.children[this.sliderContainer.children.length-1].classList.add("active"),this.currentSlideId=this.sliderContainer.children.length-1;else{let t=this.sliderContainer.children[this.currentSlideId];this.sliderContainer.children[this.currentSlideId-1].classList.add("active"),t.classList.remove("active"),this.currentSlideId--}this.sliderOptions.autoHeight&&this.updateHeight(),this.sliderOptions.captions&&this.updateCaption(),this.sliderOptions.bulletsNav&&this.updateActiveBullet(this.currentSlideId)}moveNext(){if(this.currentSlideId>=this.childrenLength()-1)this.sliderContainer.children[this.currentSlideId].classList.remove("active"),this.sliderContainer.children[0].classList.add("active"),this.currentSlideId=0;else{let t=this.sliderContainer.children[this.currentSlideId];this.sliderContainer.children[this.currentSlideId+1].classList.add("active"),t.classList.remove("active"),this.currentSlideId++}this.sliderOptions.autoHeight&&this.updateHeight(),this.sliderOptions.captions&&this.updateCaption(),this.sliderOptions.bulletsNav&&this.updateActiveBullet(this.currentSlideId)}goToSlide(t){return t<0?console.error("slideId must be a positive number."):t>=this.childrenLength()?console.error("slideId must be less than the number of slides."):(this.sliderContainer.children[this.currentSlideId].classList.remove("active"),this.sliderContainer.children[t].classList.add("active"),this.currentSlideId=t,this.sliderOptions.autoHeight&&this.updateHeight(),this.sliderOptions.captions&&this.updateCaption(),void(this.sliderOptions.bulletsNav&&this.updateActiveBullet(this.currentSlideId)))}startAutoplay(t=void 0){if(this.autoplayInterval&&clearInterval(this.autoplayInterval),t){if("number"!=typeof t)return console.error("delay must be a number.");if(t<0)return console.error("delay must be a positive number.")}const e=t?Math.trunc(t):this.sliderOptions.autoplayDelay;this.autoplayInterval=setInterval((()=>{this.moveNext()}),e)}stopAutoplay(){this.autoplayInterval&&(clearInterval(this.autoplayInterval),this.autoplayInterval=null)}hideShowArrowsNavigation(){1==this.sliderOptions.arrowsNav&&(this.childrenLength()>1?(this.arrowLeft.style.display="",this.arrowRight.style.display=""):(this.arrowLeft.style.display="none",this.arrowRight.style.display="none"))}init(){if(this.isInited)return;if(!this.sliderWrapper||!this.sliderContainer)throw new Error("sliderWrapper or sliderContainer are null/undefined. Check your selector or DOM elements.");if(this.sliderWrapper.children.length<1)throw new Error("There are no slides inside sliderWrapper.");this.sliderWrapper.classList.add("as-slider"),this.sliderContainer.classList.add("as-slider-container");const t=this.sliderWrapper.children.length;for(let e=0;e<t;e++){const t=this.sliderWrapper.firstElementChild;if(!t)return;t.classList.add("as-slide"),this.sliderContainer.append(t)}if(this.sliderWrapper.setAttribute("data-transition",this.sliderOptions.transition),this.sliderContainer.firstElementChild?.classList.add("active"),this.sliderWrapper.appendChild(this.sliderContainer),this.sliderOptions.arrowsNav&&(this.arrowLeft=document.createElement("div"),this.arrowRight=document.createElement("div"),this.arrowLeft.classList.add("arrow"),this.arrowRight.classList.add("arrow"),this.arrowLeft.classList.add("arrow-left"),this.arrowRight.classList.add("arrow-right"),this.arrowLeft.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="48" width="48"><path d="M28.05 36 16 23.95 28.05 11.9l2.15 2.15-9.9 9.9 9.9 9.9Z"/></svg>',this.arrowRight.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="48" width="48"><path d="m18.75 36-2.15-2.15 9.9-9.9-9.9-9.9 2.15-2.15L30.8 23.95Z"/></svg>',this.sliderWrapper.append(this.arrowLeft),this.sliderWrapper.append(this.arrowRight),[this.arrowLeft,this.arrowRight].forEach((t=>{t.addEventListener("click",(e=>{e.preventDefault(),t.classList.contains("arrow-left")?this.movePrev():this.moveNext(),this.sliderOptions.stopAtAction&&this.stopAtActionMethod()}))})),this.hideShowArrowsNavigation()),this.sliderOptions.captions){this.sliderWrapper.classList.add("has-captions");const t=document.createElement("div");t.classList.add("wrapper-captions"),t.innerHTML="<p></p>",this.sliderWrapper.append(t),this.updateCaption()}if(this.sliderOptions.bulletsNav){this.sliderWrapper.classList.add("has-bullets");const e=document.createElement("div");e.classList.add("wrapper-bullets");for(let i=0;i<t;i++){const t=document.createElement("div");t.classList.add("bullet"),0===i&&t.classList.add("active"),t.setAttribute("data-slide-id",i.toString()),e.append(t)}e.addEventListener("click",(t=>{const e=t.target;if(e&&e instanceof HTMLElement&&e.classList.contains("bullet")){const t=parseInt(e.getAttribute("data-slide-id")||"0");this.goToSlide(t),this.updateActiveBullet(t),this.sliderOptions.stopAtAction&&this.stopAtActionMethod()}})),this.sliderWrapper.append(e)}if("IMG"===this.sliderContainer.firstElementChild?.tagName){const t=new Image;t.addEventListener("load",(()=>{this.sliderOptions.autoHeight&&this.updateHeight()})),t.src=this.sliderContainer.firstElementChild.getAttribute("src")||""}return!this.isTouchDevice&&this.sliderOptions.keyboardNav&&(this.sliderWrapper.setAttribute("tabindex","0"),this.sliderWrapper.addEventListener("keydown",(t=>{t.preventDefault(),"ArrowLeft"===t.key&&this.movePrev(),"ArrowRight"===t.key&&this.moveNext(),"Space"===t.key&&(this.autoplayInterval?this.stopAutoplay():this.startAutoplay())}))),!this.isTouchDevice&&this.sliderOptions.autoplay&&this.sliderOptions.pauseOnHover&&(this.sliderWrapper.addEventListener("mouseenter",(()=>{this.autoplayInterval&&this.stopAutoplay()})),this.sliderWrapper.addEventListener("mouseleave",(()=>{this.autoplayInterval||0!=this.sliderOptions.stoppedByAction||this.startAutoplay()}))),this.sliderOptions.autoplay&&this.startAutoplay(),this.sliderOptions.autoHeight&&(this.updateHeight(),window.addEventListener("resize",this.updateHeight.bind(this))),this.isInited=!0,this}}